/* =========================================================
   custom_callouts_final.css
   Callouts personalizados (Quarto fenced div):
     ::::: callout-<tipo>
     ::: callout-title
     ::: callout-body
   Objetivo:
   - Tarjeta con fondo por tipo
   - "Pestaña" / barra izquierda de color (UNA sola, en el contenedor)
   - Sin dobles marcas/pestañas
   - Icono automático distinto por tipo (Bootstrap Icons)
   ========================================================= */

/* ---- Variables base ---- */
:root{
  --callout-radius: 14px;
  --callout-border: 6px;                    /* ancho barra izquierda */
  --callout-shadow: 0 10px 24px rgba(0,0,0,.07);
  --callout-borderline: rgba(0,0,0,.10);
}

/* ---------------------------------------------------------
   1) Quitar adornos/pestañas que puedan inyectar Quarto/tema
   IMPORTANTE: NO tocamos .callout-title::before (ahí va el icono)
   --------------------------------------------------------- */
.callout::before, .callout::after,
.callout-title-container::before, .callout-title-container::after,
.callout-body::before, .callout-body::after,
.callout-content::before, .callout-content::after,
[class^="callout-"]::before, [class^="callout-"]::after,
[class*=" callout-"]::before, [class*=" callout-"]::after{
  content: none !important;
  display: none !important;
  border: 0 !important;
  box-shadow: none !important;
  background-image: none !important;
}

/* Evita imágenes de fondo del tema en las capas internas */
.callout,
.callout-title-container,
.callout-body,
.callout-content,
[class^="callout-"], [class*=" callout-"]{
  background-image: none !important;
}

/* ---------------------------------------------------------
   2) Contenedor: tarjeta + barra izquierda (pestaña de color)
   --------------------------------------------------------- */
[class^="callout-"], [class*=" callout-"]{
  /* Tarjeta */
  background: var(--callout-bg, #fff) !important;
  border: 1px solid var(--callout-borderline) !important;
  border-left: var(--callout-border) solid var(--callout-accent, #00563F) !important; /* pestaña izquierda */
  border-radius: var(--callout-radius) !important;
  box-shadow: var(--callout-shadow) !important;
  overflow: hidden !important;

  margin: 0 0 2em 0 !important;
  padding: 0 !important;
}

/* ---------------------------------------------------------
   3) Título + cuerpo (sin duplicar la barra)
   --------------------------------------------------------- */
.callout-title,
.callout-body,
.callout-content{
  background: transparent !important;
  border-left: 0 !important;
  box-shadow: none !important;
  outline: 0 !important;
}

/* Título: franja superior sutil (opcional pero elegante) */
.callout-title{
  margin: 0 !important;
  padding: .85em 1.05em !important;

  display: flex !important;
  align-items: center !important;
  gap: .55em !important;

  font-weight: 750 !important;
  font-size: 1.05em !important;
  letter-spacing: .2px !important;
  color: var(--callout-accent, #00563F) !important;

  background: rgba(0,0,0,.02) !important; /* franja suave */
  border-bottom: 1px solid rgba(0,0,0,.06) !important;
}

/* Cuerpo */
.callout-body,
.callout-content{
  padding: .85em 1.05em 1.05em 1.05em !important;
}

/* ---------------------------------------------------------
   4) Iconos automáticos (Bootstrap Icons)
   Asegúrate de cargar en _quarto.yml:
   <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
   --------------------------------------------------------- */
.callout-title::before{
  font-family: "bootstrap-icons";
  font-style: normal;
  font-weight: normal;
  display: inline-block;
  line-height: 1;
  font-size: 1.05em;
  opacity: .95;
  margin-right: .15em;
  content: "\uF431"; /* bi-info-circle (por defecto) */
}

/* Icono por tipo */
.callout-definicion  > .callout-title::before{ content: "\uF3E8"; } /* book */
.callout-teorema     > .callout-title::before{ content: "\uF5D3"; } /* award */
.callout-proposicion > .callout-title::before{ content: "\uF26B"; } /* check2-circle */
.callout-ejemplo     > .callout-title::before{ content: "\uF4A4"; } /* lightbulb */
.callout-ejercicio   > .callout-title::before{ content: "\uF2E2"; } /* pencil-square */
.callout-nota        > .callout-title::before{ content: "\uF4A2"; } /* sticky */
.callout-advertencia > .callout-title::before{ content: "\uF33A"; } /* exclamation-triangle */
.callout-curiosidad  > .callout-title::before{ content: "\uF1C9"; } /* compass */

/* ---------------------------------------------------------
   5) Colores por tipo (fondo + acento)
   --------------------------------------------------------- */
.callout-definicion{  --callout-bg:#e6f4ea; --callout-accent:#00563F; }
.callout-teorema{     --callout-bg:#e3e8fc; --callout-accent:#1f3a93; }
.callout-proposicion{ --callout-bg:#fdf4e3; --callout-accent:#8a5a00; }
.callout-ejemplo{     --callout-bg:#f3e8fd; --callout-accent:#5b2a86; }
.callout-ejercicio{   --callout-bg:#eaf5fc; --callout-accent:#0b5a7a; }
.callout-nota{        --callout-bg:#fff3cd; --callout-accent:#7a5a00; }
.callout-advertencia{ --callout-bg:#fdecea; --callout-accent:#8a1f17; }
.callout-curiosidad{  --callout-bg:#f1f8ff; --callout-accent:#0b4a8b; }

/* ---------------------------------------------------------
   6) Compatibilidad con .callout nativo de Quarto:
   si aparece junto a tus clases, mantenemos la tarjeta,
   pero evitamos “chrome” interno duplicado.
   --------------------------------------------------------- */
.callout{
  background: var(--callout-bg, #fff) !important;
  border: 1px solid var(--callout-borderline) !important;
  border-left: var(--callout-border) solid var(--callout-accent, #00563F) !important;
  border-radius: var(--callout-radius) !important;
  box-shadow: var(--callout-shadow) !important;
  overflow: hidden !important;
}

.callout .callout-title-container,
.callout .callout-body{
  background: transparent !important;
  border: 0 !important;
  box-shadow: none !important;
}

/* =========================================================
   PARCHE: forzar el fondo SIEMPRE (aunque Quarto añada .callout)
   Pegar AL FINAL
   ========================================================= */

.callout-definicion,  .callout.callout-definicion  { background-color:#e6f4ea !important; }
.callout-teorema,     .callout.callout-teorema     { background-color:#e3e8fc !important; }
.callout-proposicion, .callout.callout-proposicion { background-color:#fdf4e3 !important; }
.callout-ejemplo,     .callout.callout-ejemplo     { background-color:#f3e8fd !important; }
.callout-ejercicio,   .callout.callout-ejercicio   { background-color:#eaf5fc !important; }
.callout-nota,        .callout.callout-nota        { background-color:#fff3cd !important; }
.callout-advertencia, .callout.callout-advertencia { background-color:#fdecea !important; }
.callout-curiosidad,  .callout.callout-curiosidad  { background-color:#f1f8ff !important; }

/* Asegura que el tema no “blanquee” el interior */
.callout-title-container,
.callout-body{
  background: transparent !important;
}


.smalltable {
  overflow-x: auto;
}
.smalltable table {
  font-size: 0.78em;
  white-space: nowrap;
}
.center table { margin-left:auto; margin-right:auto; }
